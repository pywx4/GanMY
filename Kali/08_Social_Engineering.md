# 社会工程学 (Social Engineering)
ettercap 和 setoolkit

# Metasploit
1. payload
2. exploit
3. 远程攻击（连环攻击，针对远程溢出漏洞）
4. 本地攻击（离线攻击，强大）
Msfpayload
Kali：192.168.1.120
远程溢出主机：192.168.1.103

Metasploitable2

# 提权

今天来讲的是提权 由于前面都介绍过理论知识了 这里就不语音了

几种情况：
1、payload注入的程序是浏览器 一旦浏览器关闭 对应session就关闭，这时我们需要马上迁移到其他进程上 OK

2、获得的shell权限比较小 需要使用提升权限 OK

3、添加用户隐藏，提升权限 OK

大家可以暂停一下看看

下面给大家演示常规步骤

攻击者IP：192.168.1.120

被攻击IP：192.168.1.103

search 搜索模块

1、信息收集 nmap 提取有用信息 仔细分析后进入下一步

2、漏洞映射 sp2或者server2003 还有一些服务 因为这里演示浏览器注入 所以不用其他远程攻击模块 我们经过分析后知道有一个chunksize的漏洞在低版本的windows上 我们尝试一下

3、漏洞利用 chunksize

最好使用meterpreter 强大不解释 使用tcp反向连接

一系列社会工程学招数后对方打开你的网络连接

获取shell 缺了个$。。。

4、提升权限

开了3389 试试登录进去 background 挂起session

xp挂掉了 我试过了 是可以脸上去远程桌面的 教程就到这里 88

提权后的工作
攻击IP：192.168.1.120

被攻击IP：192.168.1.103

使用ms08_067进行攻击

OK 下面来逐个演示

1、添加用户 OK

2、获取管理员hash OK 如果是权限不足可以使用普通提权 再不行就可以

3、令牌冒充 OK
使用incognito
列出可用令牌
windows命名原因 需要用\\代替\

4、埋下后门 键盘记录 vnc等等

先来VNC
5、添加持续访问
参数
X 开机自动自动
p 端口号
r 连接地址
i 重连时间

安装后门成功

刚刚按错了F2
现在重新来过

后门安装成功后我们只要打开监听器就可以了

什么是监听器？放心回想一下我们离线攻击时用到的exploit

现在来演示 没错就是他 端口跟IP设置好了就可以了 和前面离线攻击设置一样 只要被攻击者重启 就会自动连接到你打开的监听器 下面我们来开远程连接 桌面 用到我们刚提权添加的用户

这时候不行 我们再来一次 把管理员踢出去 OK 登录进去了

好吧 没问题吧 还是建议大家用vnc好吧

如果有机会我会给大家讲下从web服务器杀进去 就是十大web风险程序 inject xss 之类的

那么我们的	linux下的渗透技术课程就圆满结束了

后面还有一些附录 希望大家可以去追逐自己的梦想

88 kernelish
